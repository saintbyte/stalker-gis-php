function mod(a,b){return a-b*Math.floor(a/b)}
function modcrs(a){return mod(a,2*Math.PI)}
function atan2(c,a){var b;if(a<0){b=Math.atan(c/a)+Math.PI}if((a>0)&&(c>=0)){b=Math.atan(c/a)}if((a>0)&&(c<0)){b=Math.atan(c/a)+2*Math.PI}if((a==0)&&(c>0)){b=Math.PI/2}if((a==0)&&(c<0)){b=3*Math.PI/2}if((a==0)&&(c==0)){alert("atan2(0,0) undefined");b=0}return b}function MakeArray(b){this.length=b;for(var a=1;a<=b;a++){this[a]=0}return this}function magic_fix(a){return a*magic_kof}function magic_unfix(a){return a/magic_kof}function math_radius(f,b){var a=magic_fix(f.x);var e=magic_fix(f.y);var d=magic_fix(b.x);var c=magic_fix(b.y);return Math.floor(Math.sqrt(Math.pow((a-d),2)+Math.pow((e-c),2)))}
function debug(a){console.log(a)}
function crsdist_ell(F,z){var b=Math.PI/180;var w=b*F.lat();var v=b*z.lat();var L=b*F.lng();var K=b*z.lng();var R=6378.137/1.852;var M=1/298.257223563;var E,J,I,H,S,G,Q,t,i;var C,k,o,j,n,B,p,h,m,N,P,O;var g=5e-11;var l,A,D;var u=1;var q=100;if((w+v==0)&&(Math.abs(L-K)==Math.PI)){alert("Course and distance between antipodal points is undefined");w=w+0.00001}if(w==v&&(L==K||Math.abs(Math.abs(L-K)-2*Math.PI)<g)){alert("Points 1 and 2 are identical- course undefined");out=new MakeArray(0);out.d=0;out.crs12=0;out.crs21=Math.PI;return out}E=1-M;J=E*Math.tan(w);I=E*Math.tan(v);H=1/Math.sqrt(1+J*J);S=H*J;G=1/Math.sqrt(1+I*I);Q=H*G;t=Q*I;i=t*J;C=K-L;O=C+1;while((Math.abs(O-C)>g)&&(u<q)){u=u+1;k=Math.sin(C);o=Math.cos(C);J=G*k;I=t-S*G*o;j=Math.sqrt(J*J+I*I);n=Q*o+i;B=atan2(j,n);p=Q*k/j;h=1-p*p;m=i+i;if(h>0){m=n-m/h}N=m*m*2-1;P=((-3*h+4)*M+4)*h*M/16;O=C;C=((N*n*P+m)*j*P+B)*p;C=(1-P)*C*M+K-L}l=modcrs(atan2(J,I));A=modcrs(atan2(H*k,t*o-S*G)+Math.PI);C=Math.sqrt((1/(E*E)-1)*h+1);C+=1;C=(C-2)/C;P=1-C;P=(C*C/4+1)/P;O=(0.375*C*C-1)*C;C=N*n;D=((((j*j*4-3)*(1-N-N)*m*O/6-C)*O/4+m)*j*O+B)*P*R*E;out=new MakeArray(0);out.d=D;out.crs12=l;out.crs21=A;out.crs12_gr=l*(180/Math.PI);out.crs21_gr=A*(180/Math.PI);if(Math.abs(u-q)<g){alert("Algorithm did not converge")}return out}
function fix_gr(a){if(a<0){a+=359}if(a>359){a=a-359}return a};