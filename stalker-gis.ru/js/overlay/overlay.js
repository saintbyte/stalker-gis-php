var Overlay=new Class({Implements:[Options,Events],options:{color:"#000",opacity:0.7,"z-index":1,container:document.body,duration:100},initialize:function(d){this.setOptions(d);var b=this,a=document.id(b.options.container),g=new Element("div",{styles:{position:"absolute",left:0,top:0,visibility:"hidden",overflow:"hidden","z-index":b.options["z-index"]+1},events:{click:function(h){b.fireEvent("onClick",[h])}}}).inject(a),e=new Element("iframe",{src:"about:blank",frameborder:1,scrolling:"no",styles:{position:"absolute",top:0,left:0,width:"100%",height:"100%",filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)",opacity:0,"z-index":b.options["z-index"]+2}}).inject(g),c=new Element("div",{styles:{position:"absolute",left:0,top:0,width:"100%",height:"100%","background-color":b.options.color,"z-index":b.options["z-index"]+3}}).inject(g),f=new Fx.Morph(g,{duration:b.options.duration});b.container=g;b.wrapper=g;b.iframe=e;b.overlay=c;b.morph=f;a.addEvents({resize:b.position.bind(b),scroll:b.position.bind(b)});this.fireEvent("onLoad")},position:function(){var a=this;if(a.options.container==document.body){var b=document.id(document.body).getScrollSize();a.wrapper.setStyles({width:b.x,height:b.y})}else{a.wrapper.setStyles(a.container.getCoordinates())}a.fireEvent("onPosition")},show:function(){this.position();this.morph.start({opacity:[0,this.options.opacity]});this.fireEvent("onShow")},hide:function(){this.morph.start({opacity:[this.options.opacity,0]});this.fireEvent("onHide")}});